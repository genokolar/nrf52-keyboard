#pragma once
#include <stdint.h>
#include <stdbool.h>

//SSD1306_LCDHEIGHT 默认为32
#ifndef SSD1306_LCDHEIGHT
#define SSD1306_LCDHEIGHT 64
#endif

#define SSD1306_ROWS (SSD1306_LCDHEIGHT / 8)
#define SSD1306_COLS 128

enum ssd1306_commands {
    SSD1306_SETLOWCOLUMN = 0x00,
    SSD1306_SETHIGHCOLUMN = 0x10,
    SSD1306_MEMORYMODE = 0x20, //设置内存模式
    SSD1306_COLUMNADDR = 0x21, //设置列地址
    SSD1306_PAGEADDR = 0x22,   //设置页地址
    SSD1306_SETSTARTLINE = 0x40,

    SSD1306_SETCONTRAST = 0x81, //对比度调解，256级
    SSD1306_CHARGEPUMP = 0x8D,
    SSD1306_SEGREMAP_RESET = 0xA0,  //设置段复用，列地址0映射到SEG0（复位值）
    SSD1306_SEGREMAP_INVERSE = 0xA1,//设置段复用，列地址127映射到SEG0（复位值）
    SSD1306_DISPLAYALLON_RESUME = 0xA4,//恢复RAM内容显示（复位）
    SSD1306_DISPLAYALLON = 0xA5, //忽略RAM内容，全屏显示开
    SSD1306_NORMALDISPLAY = 0xA6, //正常显示
    SSD1306_INVERTDISPLAY = 0xA7, //反显
    SSD1306_SETMULTIPLEX = 0xA8, //设置复用比
    SSD1306_DISPLAYOFF = 0xAE, //显示关闭
    SSD1306_DISPLAYON = 0xAF,  //显示开启在正常模式
    SSD1306_PAGESTARTADDR = 0xB0,
    SSD1306_COMSCANINC = 0xC0, //设置COM输出扫描方向：正常方向
    SSD1306_COMSCANDEC = 0xC8, //设置COM输出扫描方向：映射模式

    SSD1306_SETDISPLAYOFFSET = 0xD3, //设置显示偏移量 0-63
    SSD1306_SETDISPLAYCLOCKDIV = 0xD5, //设置显示时钟分频器、振荡器频率
    SSD1306_SETPRECHARGE = 0xD9, //设置预充电周期
    SSD1306_SETCOMPINS = 0xDA, //设置COM 引脚硬件配置 
    SSD1306_SETVCOMDETECT = 0xDB, //设置VCOM取消水平等级

    SSD1306_RIGHT_HORIZONTAL_SCROLL = 0x26,
    SSD1306_LEFT_HORIZONTAL_SCROLL = 0x27,
    SSD1306_VERTICAL_AND_RIGHT_HORIZONTAL_SCROLL = 0x29,
    SSD1306_VERTICAL_AND_LEFT_HORIZONTAL_SCROLL = 0x2A,
    SSD1306_DEACTIVATE_SCROLL = 0x2E,
    SSD1306_ACTIVATE_SCROLL = 0x2F,
    SSD1306_SET_VERTICAL_SCROLL_AREA = 0xA3,
};

extern uint8_t ssd1306_display_buffer[];
extern bool ssd1306_buff_dirty[SSD1306_ROWS];
void ssd1306_show_buff(uint8_t row, uint8_t col_start, uint8_t len);
void ssd1306_show_dirty_block();

#ifndef SSD1306_INIT_BUFF
#define SSD1306_INIT_BUFF {\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0xC0,0xC0,0xC0,0xC0,0xC0,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,0xF8,\
0xF8,0xF8,0xF0,0xF0,0xF0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0xF0,0xF0,\
0x00,0xF0,0xF0,0x30,0x30,0x30,0x30,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0xF0,\
0xF0,0x30,0x30,0x30,0xF0,0xE0,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x60,0x60,0xF8,0x98,0x18,0x18,0x1F,0xC0,0xC0,0x0F,0x0F,0x00,0x00,0x00,0x00,\
0xC3,0xC3,0xFF,0xFF,0xC3,0xC3,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x7F,0x06,0x06,0x06,0x7F,0x7F,\
0x00,0x7F,0x7F,0x66,0x66,0x66,0x66,0x00,0x7F,0x7F,0x60,0x60,0x60,0x60,0x00,0x7F,\
0x7F,0x06,0x06,0x06,0x07,0x03,0x00,0x6F,0x6F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x81,0xC1,0x63,0xF7,0xFF,0x7F,0x07,0x07,0xFC,0x8C,0x0C,0x0C,0x8C,\
0xFC,0x04,0x04,0x7F,0xFF,0xF7,0x63,0xC1,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0xE0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,\
0xE0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,\
0xF0,0xF0,0xF8,0xF8,0xF8,0xF8,0xF8,0xF0,0xF0,0xE0,0xC0,0x80,0x00,0x00,0x00,0x00,\
0x00,0xFE,0x23,0x21,0x20,0x20,0xFF,0xFF,0xE0,0xD8,0xD8,0xC0,0xC1,0xC1,0xC1,0xC1,\
0xC0,0xD8,0xD8,0xE0,0xFF,0xFF,0x20,0x20,0x21,0x23,0xFE,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0xFE,0xFF,0xFF,0xFF,0xFF,0xFF,0xEF,0xEF,0xC7,0x83,0x83,\
0x83,0x01,0x01,0x01,0x00,0x00,0x00,0x30,0x78,0x78,0x30,0x00,0x00,0x00,0x00,0x78,\
0xFC,0xFE,0xFF,0xFF,0xFF,0xFF,0xFE,0xFC,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF1,0xEC,0xEC,\
0xE2,0xF1,0xFF,0xFF,0xF1,0xEC,0xEC,0xE2,0xF1,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,\
0x00,0x07,0x04,0x04,0xE6,0x3F,0x03,0x01,0x00,0x00,0xF0,0x18,0x0C,0x04,0x04,0x0C,\
0x18,0xF0,0x00,0x00,0x01,0x03,0x3F,0xE6,0x04,0x04,0x07,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x07,0x0F,0x0F,0x1F,0x1F,0x1F,0x1F,0x1F,0x1F,\
0x0F,0x0F,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x01,0x03,0x03,0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,\
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x0F,0x03,0x03,\
0x0F,0x1F,0x1F,0x03,0x03,0x03,0x1F,0x1F,0x0F,0x03,0x03,0x0F,0x1F,0x00,0x00,0x00,\
0x3E,0x22,0x22,0x22,0x23,0x20,0x20,0x20,0x20,0x20,0x3F,0x00,0x00,0x00,0x00,0x00,\
0x00,0x3F,0x20,0x20,0x20,0x20,0x20,0x23,0x22,0x22,0x22,0x3E,0x00,0x00,0x00,0x00,\
}
#endif
